@page "/atleter"

@inject AthleteService AthleteService

<MudGrid>
    @foreach (var athlete in athletes)
    {
        <MudItem xs="12" sm="6" md="4" lg="3" Class="d-flex">
            <MudCard Class="ma-3 pa-2 d-flex flex-row" Style="height:250px; flex:1;"
                     @onclick="@(() => NavigateToAthlete(athlete))">
                <MudCardContent Class="d-flex flex-column justify-start" Style="flex:1;">
                    <MudText Typo="Typo.h6" Truncate="true">@athlete.FullName</MudText>
                    <MudText Typo="Typo.body2" Truncate="true">Land: @athlete.NationalityName</MudText>
                    <MudText Typo="Typo.body2" Truncate="true">By: @athlete.City</MudText>
                    <MudText Typo="Typo.body2" Truncate="true">Alder: @athlete.Age</MudText>
                    <MudText Typo="Typo.body2" Truncate="true">Højde: @athlete.Height cm</MudText>
                </MudCardContent>

                <MudCardMedia Image="@athlete.ImageUrl"
                              Style="background-size: cover; background-position: top; width:200px; height:100%;" />
            </MudCard>
        </MudItem>
    }
</MudGrid>

@code {
    List<Athlete> athletes = new();

    private void NavigateToAthlete(Athlete athlete)
    {
        NavManager.NavigateTo($"/atleter/{athlete.Slug}");
    }

    protected override void OnInitialized()
    {
        athletes = AthleteService.GetAllAthletes();
    }
}